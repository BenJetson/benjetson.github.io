//
// _code.scss
//
// Styles related to code fences used in blogposts and projects.
//
// Notes:
//
// These code blocks are generated by Jekyll's markdown converter. All of the
// code blocks have a <pre>, but only syntax highlighted blocks have
// <pre class="highlight"> and are wrapped in a <div class="highlight">.
//
// Code fences with a language that this converter does not know how to parse
// or does not need to parse, like txt, will not have the highlight class and
// will simply be <pre> blocks.
//
// The goal here is for all code blocks to have the border and shaded background
// stripes, but highlighted blocks should also have a header that says "code".

$code-block-border-radius: 8px;

pre {
  border: 2px solid $gray-300;
  border-radius: 0 0 $code-block-border-radius $code-block-border-radius;

  padding: 15px;

  background-color: $gray-100;
  background: repeating-linear-gradient(
    -45deg,
    $gray-100,
    $gray-100 3px,
    $white 3px,
    $white 6px
  );
}

pre.highlight {
  // Highlighted blocks have the code header and therefore do not need a top
  // border.
  border-top: none;
}

pre:not(.highlight) {
  // Non-highlighted blocks do not have the code header, so they need border
  // radius on all corners, not just the bottom corners.
  border-radius: $code-block-border-radius;
}

div.highlight::before {
  display: block;
  content: "Code";

  border-radius: $code-block-border-radius $code-block-border-radius 0 0;
  border-bottom: none;

  text-transform: uppercase;
  font-weight: bold;
  font-size: 75%;
  line-height: 1;

  padding: 0.5em 1em;

  background-color: $gray-300;

  @media print {
    border: 1px solid $gray-300;
  }
}

div.highlight,
pre:not(.highlight) {
  margin-left: 2em;
  margin-right: 2em;
  @include media-breakpoint-down(sm) {
    margin-left: 0;
    margin-right: 0;
  }
}
